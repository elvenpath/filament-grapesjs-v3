document.addEventListener("alpine:init",()=>{Alpine.data("grapesjs",({state:i,statePath:p,readOnly:o,tools:a,minHeight:r,container:h,plugins:s,settings:n})=>({instance:null,state:i,tools:a,plugins:s,settings:n,init(){this.waitForDependencies()},waitForDependencies(){if(typeof window.grapesjs>"u"){requestAnimationFrame(()=>this.waitForDependencies());return}this.$nextTick(()=>this.initEditor())},initEditor(){let e=this.$el.querySelector(".grapesjs-wrapper");if(!e){console.error("GrapesJS: Container not found");return}let t=n.i18n||{},c={...t,...window.grapejsLocaleRo?{messages:{...t.messages||{},ro:window.grapejsLocaleRo}}:{}},{i18n:g,...d}=n,l={height:`${r}px`,container:e,showOffsets:!0,fromElement:!0,noticeOnUnload:!1,storageManager:!1,plugins:s,i18n:c,...d};this.instance=grapesjs.init(l),typeof window.grapejsCustomBlocks=="function"&&window.grapejsCustomBlocks(this.instance),this.instance.on("update",()=>{this.updateState()}),o&&this.setReadOnly(!0)},updateState(){let e=this.instance.getHtml({cleanId:!0}),t=e.match(/<body\b[^>]*>([\s\S]*?)<\/body>/);t?this.state=t[1]:this.state=e},setReadOnly(e){if(this.instance){let t=this.instance.getEditor();t&&t.setDragMode(e?"none":"translate")}}}))});
